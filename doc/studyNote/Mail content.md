# Mail content

On 24-11-01, 徐銘鴻 214 wrote:

> About F1AP Version

> I currently cannot determine which version of F1AP they are using from the build log, so I will inquire further.

In the F1 Setup Request, there is a (mandatory) message IE for the RRC

version. The OAI CU prints the version received from the DU. Assuming

OSC O-DU-high fills this properly, you should see it in OAI output

> However, I can provide the files they gave me along with the information mentioned at the top of their compiled output.

> Please refer to the description below, as well as the attached OSC-provided F1AP struct definition file.

>

> ```

> /*

>  * Generated by asn1c-0.9.29 (

[http://lionet.info/asn1c](http://lionet.info/asn1c)

)

>  * From ASN.1 module "F1AP-IEs"

>  *    found in "../F1.asn1"

>  *    `asn1c -D ../F1_output/ -fcompound-names -fno-include-deps -findirect-choice -gen-PER`

>  */

> ```

>

> About CellGroupConfig Decoding Issue

> The segmentation fault occurs in the nr_update_sr function due to a null pointer dereference of pucch_Config, indicating potential initialization issues or memory management errors.

> refer to the attached UE-BT.log for the complete UE log and backtrace log.

> OAI UE backtrace and log:

> ```

> [MAC]   received TA command 31

> [PHY]   RAR-Msg2 decoded

> [NR_MAC]   [RAPROC][152.19] RA-Msg3 transmitted

> [MAC]   [UE 0]Frame 153 Contention resolution identity: 0x14ce0877fb66 Terminating RA procedure

> [MAC]   [UE 0][153.15][RAPROC] RA procedure succeeded. CB-RA: Contention Resolution is successful.

> [NR_RRC]   [UE0][RAPROC] Logical Channel DL-CCCH (SRB0), Received NR_RRCSetup

> [RLC]   Added srb 1 to UE 0

> [MAC]   Applying CellGroupConfig from gNodeB

> [NR_RRC]   State = NR_RRC_CONNECTED

> [NR_RRC]   [UE 0][RAPROC] Logical Channel UL-DCCH (SRB1), Generating RRCSetupComplete (bytes33)

>

> Thread 9 "Tpool7_-1" received signal SIGSEGV, Segmentation fault.

> [Switching to Thread 0x7ffff2a00640 (LWP 3181723)]

> nr_update_sr (mac=0x7fffef000010) at /home/hpe/openairinterface5g/openair2/LAYER2/NR_MAC_UE/nr_ue_scheduler.c:1184

> 1184          if (check_pucchres_for_pending_SR(pucch_Config, lc_info->sr_id)) {

> (gdb) bt full

> #0  nr_update_sr (mac=0x7fffef000010)

>     at /home/hpe/openairinterface5g/openair2/LAYER2/NR_MAC_UE/nr_ue_scheduler.c:1184

>         current_UL_BWP = 0x0

>         pucch_Config = 0x0

As you can see here, pucch_Config is NULL. That's why you likely get a segfault.

Can you please print the CellGroupConfig when received? see the attached

patch. This will be check if/what is the PUCCH config.

in the general UE logs, it looks ok so far, I could not spot a problem.