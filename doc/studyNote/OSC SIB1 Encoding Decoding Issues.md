# OSC SIB1 Encoding/Decoding Issues

Start Date: 2024/06/19
Summary: Investigating and addressing encoding/decoding issues related to OSC and OAI ASN.1 implementations.
Status: Done
Assign: Ming å’šå’š [éŠ˜é´»]

<aside>
â›” [OSC issues] In source code comment write: It decode failure in wireshark.

</aside>

```c
/* Commented due to ASN decode failure in wireshark.
 * Parameters like dci_Format0_0_AndFormat1_0 which are pointer to a structure that 
 * does not have any member parameter lead to decode failure in wireshark. 
 * The issue has been reported to Nokia.
 * The following code will be uncommented once the issue is resolved */
```

## In OSC encode ASN.1

```c
/*
 * Generated by asn1c-0.9.29 (http://lionet.info/asn1c)
 * From ASN.1 module "NR-RRC-Definitions"
 * 	found in "../ASN1_Input/rrc_15_3_asn.asn1"
 * 	`asn1c -D ../RRC_output_14Nov/ -fcompound-names -fno-include-deps -findirect-choice -gen-PER`
 */
```

## In OAI encode ASN.1

```c
/*
 * Generated by asn1c-0.9.29 (http://lionet.info/asn1c)
 * From ASN.1 module "NR-RRC-Definitions"
 * 	found in "/home/chen/openairinterface5g/openair2/RRC/NR/MESSAGES/ASN.1/nr-rrc-17.3.0.asn1"
 * 	`asn1c -pdu=all -fcompound-names -gen-UPER -no-gen-BER -no-gen-JER -no-gen-OER -gen-APER -no-gen-example -findirect-choice -D /home/chen/openairinterface5g/cmake_targets/ran_build/build/openair2/RRC/NR/MESSAGES`
 */
```

here is the table with the two ASN.1 encoding commands organized for comparison:

| Parameter | OSC | OAI |
| --- | --- | --- |
| `asn1c` | `asn1c` | `asn1c` |
| `-D` | `../RRC_output_14Nov/` | `/home/chen/openairinterface5g/cmake_targets/ran_build/build/openair2/RRC/NR/MESSAGES` |
| `-fcompound-names` | Yes | Yes |
| `-fno-include-deps` | Yes | No |
| `-findirect-choice` | Yes | Yes |
| `-gen-PER` | Yes | No |
| `-pdu=all` | No | Yes |
| `-gen-UPER` | No | Yes |
| `-no-gen-BER` | No | Yes |
| `-no-gen-JER` | No | Yes |
| `-no-gen-OER` | No | Yes |
| `-gen-APER` | No | Yes |
| `-no-gen-example` | No | Yes |

<aside>
ðŸ’¡ Solution: replace OAI endcode function

</aside>

- OSC encode function

uper_encode_to_buffer(&asn_DEF_NR_BCCH_DL_SCH_Message

- OAI encode function

Use OAI uper_encode_to_buffer(&asn_DEF_NR_BCCH_DL_SCH_Message) function in OSC